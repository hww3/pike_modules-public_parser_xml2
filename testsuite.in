START_MARKER

// verify that we have all of the expected classes and objects
test_true(objectp(Public.Parser.XML2))
test_true(programp(Public.Parser.XML2.Node))
test_true(programp(Public.Parser.XML2.Stylesheet))
test_true(programp(Public.Parser.XML2.RelaxNG))
test_true(programp(Public.Parser.XML2.SAX))
test_true(programp(Public.Parser.XML2.XMLReader))
test_true(programp(Public.Parser.XML2.Constants))

// verify that we have all of the expected methods in the main module
test_true(functionp(Public.Parser.XML2.parse_xml))
test_true(functionp(Public.Parser.XML2.parse_html))
test_true(functionp(Public.Parser.XML2.parse_xml))
test_true(functionp(Public.Parser.XML2.parse_relaxng))
test_true(functionp(Public.Parser.XML2.parse_xml_force))
test_true(functionp(Public.Parser.XML2.new_node))
test_true(functionp(Public.Parser.XML2.new_xml))
test_true(functionp(Public.Parser.XML2.render_xml))
test_true(functionp(Public.Parser.XML2.render_html))
test_true(functionp(Public.Parser.XML2.validate))
test_true(functionp(Public.Parser.XML2.utf8_check))
test_true(functionp(Public.Parser.XML2.utf8_to_isolat1))
test_true(functionp(Public.Parser.XML2.utf8_to_html))
test_true(functionp(Public.Parser.XML2.substituteEntitiesDefault))
test_true(functionp(Public.Parser.XML2.set_html_parser_options))
test_true(functionp(Public.Parser.XML2.set_xml_parser_options))
test_true(functionp(Public.Parser.XML2.set_auto_utf8_convert))
test_true(functionp(Public.Parser.XML2.select_xpath_nodes))
test_true(functionp(Public.Parser.XML2.get_encodings))
test_true(functionp(Public.Parser.XML2.get_encoding_name))
test_true(functionp(Public.Parser.XML2.get_encoding_alias))

// test new_xml, render_xml and parse_xml...
test_true(objectp(Public.Parser.XML2.new_xml("1.0", "testsuite")))
test_true(Public.Parser.XML2.render_xml(Public.Parser.XML2.new_xml("1.0", "testsuite"))=="<?xml version=\"1.0\"?>\n<testsuite/>\n"))
test_true(objectp(
Public.Parser.XML2.parse_xml(
  Public.Parser.XML2.render_xml(
    Public.Parser.XML2.new_xml("1.0", "testsuite")
                                 )
                                  )
                                    )
))
test_true(
Public.Parser.XML2.render_xml(
Public.Parser.XML2.parse_xml(
  Public.Parser.XML2.render_xml(
    Public.Parser.XML2.new_xml("1.0", "testsuite")
                                 )
                                  )
                                    )
) == "<?xml version=\"1.0\"?>\n<testsuite/>\n")

// test new_node
test_true(objectp(Public.Parser.XML2.new_node("testsuite")))
test_true((string)Public.Parser.XML2.new_node("testsuite")=="<testsuite/>")

